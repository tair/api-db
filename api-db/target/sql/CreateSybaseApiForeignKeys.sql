--
-- Copyright 2011 Carnegie Institution for Science. All rights reserved.
--
-- Generated by AndroMDA Poesys/DB cartridge: DO NOT EDIT DIRECTLY.
-- Template: SubsystemSybaseSchemaForeignKeys.vsl

-- Create all the foreign keys for the Api schema
-- Sybase does not support ON DELETE CASCADE, all deletes must be done manually.

-- Foreign keys for SubscriptionTerm

ALTER TABLE SubscriptionTerm ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);

-- Foreign keys for PartnerPattern

ALTER TABLE PartnerPattern ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);

-- Foreign keys for SubscriptionDescription

ALTER TABLE SubscriptionDescription ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);

-- Foreign keys for SubscriptionDescriptionItem

ALTER TABLE SubscriptionDescriptionItem ADD CONSTRAINT subscriptionDescription FOREIGN KEY (header, partnerId) REFERENCES SubscriptionDescription(header, partnerId);

-- Foreign keys for Login

ALTER TABLE Login ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);
ALTER TABLE Login ADD CONSTRAINT party FOREIGN KEY (partyId) REFERENCES Party(partyId);

-- Foreign keys for AccessRule

ALTER TABLE AccessRule ADD CONSTRAINT accessTypes FOREIGN KEY (accessTypeId) REFERENCES AccessType(accessTypeId);
ALTER TABLE AccessRule ADD CONSTRAINT accessTypes FOREIGN KEY (accessTypeId) REFERENCES AccessType(accessTypeId);
ALTER TABLE AccessRule ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);
ALTER TABLE AccessRule ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);
ALTER TABLE AccessRule ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);
ALTER TABLE AccessRule ADD CONSTRAINT uriPatterns FOREIGN KEY (uriPatternId) REFERENCES UriPattern(uriPatternId);
ALTER TABLE AccessRule ADD CONSTRAINT uriPatterns FOREIGN KEY (uriPatternId) REFERENCES UriPattern(uriPatternId);

-- Foreign keys for PageView

ALTER TABLE PageView ADD CONSTRAINT party FOREIGN KEY (partyId) REFERENCES Party(partyId);

-- Foreign keys for IpCount

ALTER TABLE IpCount ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);

-- Foreign keys for LimitValue

ALTER TABLE LimitValue ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);

-- Foreign keys for IpRange

ALTER TABLE IpRange ADD CONSTRAINT party FOREIGN KEY (partyId) REFERENCES Party(partyId);

-- Foreign keys for ActivationCode

ALTER TABLE ActivationCode ADD CONSTRAINT partner FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);

-- Foreign keys for SubscriptionTransaction

ALTER TABLE SubscriptionTransaction ADD CONSTRAINT activationCode FOREIGN KEY (activationCodeId) REFERENCES ActivationCode(activationCodeId);
ALTER TABLE SubscriptionTransaction ADD CONSTRAINT subscription FOREIGN KEY (partnerId, partyId) REFERENCES Subscription(partnerId, partyId);

-- Foreign keys for Subscription

ALTER TABLE Subscription ADD CONSTRAINT subscribedPartners FOREIGN KEY (partnerId) REFERENCES Partner(partnerId);
ALTER TABLE Subscription ADD CONSTRAINT subscribers FOREIGN KEY (partyId) REFERENCES Party(partyId);

